From 0d4c7299ac498f87d12fda7f5e97df23e5231aaf Mon Sep 17 00:00:00 2001
From: MrArtemSid <artem.sid.key@gmail.com>
Date: Thu, 27 Jan 2022 00:07:01 +0400
Subject: [PATCH] ARM64: dts: xiaomi: Add dipper support

---
 arch/arm64/Kconfig.platforms                  |    6 +
 arch/arm64/boot/dts/qcom/Makefile             |    1 +
 .../dipper/batterydata-e1-atl-3400mAh.dtsi    |   85 ++
 .../batterydata-e1-coslight-3400mAh.dtsi      |   85 ++
 .../xiaomi/dipper/dipper-audio-overlay.dtsi   |   57 +
 .../dipper/dipper-camera-sensor-mtp.dtsi      |  504 ++++++++
 .../dts/qcom/xiaomi/dipper/dipper-mp-v2.1.dts |   26 +
 .../dts/qcom/xiaomi/dipper/dipper-mp.dtsi     |   22 +
 .../dipper/dipper-p0-camera-sensor-mtp.dtsi   |  535 +++++++++
 .../qcom/xiaomi/dipper/dipper-p0-pinctrl.dtsi |  730 ++++++++++++
 .../dts/qcom/xiaomi/dipper/dipper-p0.dtsi     | 1057 +++++++++++++++++
 .../dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi    |  247 ++++
 .../dts/qcom/xiaomi/xiaomi-sde-display.dtsi   |   41 +
 13 files changed, 3396 insertions(+)
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-atl-3400mAh.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-coslight-3400mAh.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-audio-overlay.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-camera-sensor-mtp.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp-v2.1.dts
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-camera-sensor-mtp.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-pinctrl.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0.dtsi
 create mode 100644 arch/arm64/boot/dts/qcom/xiaomi/dipper/dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi

diff --git a/arch/arm64/Kconfig.platforms b/arch/arm64/Kconfig.platforms
index ebda92774e13..b055bf70d60e 100644
--- a/arch/arm64/Kconfig.platforms
+++ b/arch/arm64/Kconfig.platforms
@@ -457,4 +457,10 @@ config MACH_XIAOMI_E10
         help
           Support for Xiaomi Poco F1 (beryllium)
 
+config MACH_XIAOMI_E1N
+        bool "E1N board"
+        select MACH_XIAOMI_SDM845
+        help
+          Support for Xiaomi Mi 8 (dipper)
+
 endmenu
diff --git a/arch/arm64/boot/dts/qcom/Makefile b/arch/arm64/boot/dts/qcom/Makefile
index 6f6551721661..14393df9a20e 100644
--- a/arch/arm64/boot/dts/qcom/Makefile
+++ b/arch/arm64/boot/dts/qcom/Makefile
@@ -9,6 +9,7 @@ dtb-$(CONFIG_ARCH_QCOM)	+= msm8996-mtp.dtb
 dtb-$(CONFIG_ARCH_QCOM)	+= sdm845-mtp.dtb
 
 dtb-$(CONFIG_MACH_XIAOMI_E10) := xiaomi/beryllium/beryllium-mp-v2.1.dtb
+dtb-$(CONFIG_MACH_XIAOMI_E1N) := xiaomi/dipper/dipper-mp-v2.1.dtb
 
 always		:= $(dtb-y)
 subdir-y	:= $(dts-dirs)
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-atl-3400mAh.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-atl-3400mAh.dtsi
new file mode 100644
index 000000000000..c8e06b8fad6e
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-atl-3400mAh.dtsi
@@ -0,0 +1,85 @@
+qcom,e1_atl_3400mAh {
+	qcom, = <24>;
+	qcom,max-voltage-uv = <4400000>;
+	qcom,nom-batt-capacity-mah = <3400>;
+	qcom,batt-id-kohm = <68>;
+	qcom,battery-beta = <3380>;
+	qcom,fg-cc-cv-threshold-mv = <4390>;
+	qcom,battery-type = "e1_atl_3400mAh";
+	qcom,fastchg-current-ma = <3300>;
+	qcom,jeita-fcc-ranges = <0   50   330000
+			51  100  990000
+			101 150  1650000
+			151 450  3300000
+			451 600  1650000>;
+	qcom,jeita-fv-ranges =  <0   50   4400000
+			51  100  4400000
+			101 150  4400000
+			151 450  4400000
+			451 600  4100000>;
+        qcom,dynamic-fv-ranges = <0    100  4400000
+			101  200  4380000
+			201  300  4360000
+			301  400  4340000
+			401  500  4340000>;
+	qcom,checksum = <0xC3C7>;
+	qcom,gui-version = "PMI8998GUI - 2.0.0.58";
+	qcom,fg-profile-data = [
+			F0 1E 58 06
+			CB 03 B7 FD
+			D9 1C 03 02
+			9C 0D C5 0A
+			2A 18 40 23
+			35 45 4C 53
+			6D 00 00 00
+			12 00 00 00
+			00 00 01 00
+			A2 CD 1A BA
+			1F 00 08 00
+			B1 E3 55 ED
+			1A 06 55 FA
+			CE 0C AF 0A
+			43 FD 69 32
+			24 06 09 20
+			27 00 14 00
+			DD 1F 74 05
+			8D 0A 38 06
+			BB 1C 13 03
+			EA 15 3D 12
+			84 18 CF 23
+			EC 4D 27 5B
+			6B 00 00 00
+			0E 00 00 00
+			00 00 79 D5
+			34 C3 8C CB
+			18 00 00 00
+			70 00 55 ED
+			C9 06 9E 00
+			6F F4 78 02
+			5A 06 14 1B
+			A5 33 CC FF
+			07 10 00 00
+			12 0D 66 46
+			18 00 40 00
+			BF 01 0A FA
+			FF 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			];
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-coslight-3400mAh.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-coslight-3400mAh.dtsi
new file mode 100644
index 000000000000..b87378493572
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/batterydata-e1-coslight-3400mAh.dtsi
@@ -0,0 +1,85 @@
+qcom,e1_coslight_3400mAh {
+	qcom, = <24>;
+	qcom,max-voltage-uv = <4400000>;
+	qcom,nom-batt-capacity-mah = <3400>;
+	qcom,batt-id-kohm = <100>;
+	qcom,battery-beta = <3435>;
+	qcom,fg-cc-cv-threshold-mv = <4390>;
+	qcom,battery-type = "e1_coslight_3400mAh";
+	qcom,fastchg-current-ma = <3300>;
+	qcom,jeita-fcc-ranges = <0   50   330000
+			51  100  990000
+			101 150  1650000
+			151 450  3300000
+			451 600  1650000>;
+	qcom,jeita-fv-ranges =  <0   50   4400000
+			51  100  4400000
+			101 150  4400000
+			151 450  4400000
+			451 600  4100000>;
+	qcom,dynamic-fv-ranges = <0    100  4400000
+			101  200  4380000
+			201  300  4360000
+			301  400  4340000
+			401  500  4340000>;
+	qcom,checksum = <0xF35D>;
+	qcom,gui-version = "PMI8998GUI - 2.0.0.58";
+	qcom,fg-profile-data = [
+			E4 1E CB FC
+			AC 03 EF 06
+			D7 1C 10 02
+			79 0D EF 0A
+			D8 17 8F 23
+			D9 44 D4 53
+			6B 00 00 00
+			11 00 00 00
+			00 00 13 AB
+			DD CD 01 00
+			22 00 08 00
+			7D DA 96 E5
+			9B 05 13 FB
+			DB 15 84 02
+			AC EC DD 2B
+			2B 06 09 20
+			27 00 14 00
+			CE 1F 8B 05
+			73 0A AF FC
+			BF 1C 07 03
+			F2 15 34 12
+			83 18 D2 23
+			E9 4D 2B 5B
+			6B 00 00 00
+			0E 00 00 00
+			00 00 83 D5
+			BE C2 C7 CB
+			19 00 00 00
+			97 E3 96 E5
+			68 06 96 F3
+			FF F5 BA 03
+			74 07 7F 1B
+			B6 33 CC FF
+			07 10 00 00
+			06 0D 66 46
+			19 00 40 00
+			B3 01 0A FA
+			FF 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			00 00 00 00
+			];
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-audio-overlay.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-audio-overlay.dtsi
new file mode 100644
index 000000000000..c72410736521
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-audio-overlay.dtsi
@@ -0,0 +1,57 @@
+/*
+ * Copyright (c) 2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include "../../sdm845-audio-overlay.dtsi"
+&snd_934x {
+	qcom,audio-routing =
+		"AIF4 VI", "MCLK",
+		"RX_BIAS", "MCLK",
+		"MADINPUT", "MCLK",
+		"hifi amp", "LINEOUT1",
+		"hifi amp", "LINEOUT2",
+		"AMIC2_EXT_0", "MIC BIAS2",
+		"MIC BIAS2", "Headset Mic",
+		"AMIC2_EXT_1", "MIC BIAS4",
+		"MIC BIAS4", "Headset Mic2",
+		"AMIC3", "MIC BIAS1",
+		"MIC BIAS1", "ANCRight Headset Mic",
+		"AMIC1", "MIC BIAS4",
+		"MIC BIAS4", "ANCLeft Headset Mic";
+
+	qcom,wsa-max-devs = <0>;
+	qcom,adc2-switch-gpio = <&adc2_switch_gpio>;
+	qcom,msm-mbhc-usbc-audio-supported = <1>;
+	qcom,usbc-analog-en2-gpio = <&tlmm 51 0>;
+	pinctrl-names = "aud_active", "aud_sleep",
+			"quat-mi2s-active", "quat-mi2s-sleep",
+			"quat-tdm-active", "quat-tdm-sleep";
+	pinctrl-0 = <&wcd_usbc_analog_en2_active>;
+	pinctrl-1 = <&wcd_usbc_analog_en2_idle>;
+	pinctrl-2 = <&quat_mi2s_active &quat_mi2s_sd0_active
+				&quat_mi2s_sd1_active>;
+	pinctrl-3 = <&quat_mi2s_sleep &quat_mi2s_sd0_sleep
+				&quat_mi2s_sd1_sleep>;
+	pinctrl-4 = <&quat_tdm_active &quat_tdm_dout_active>;
+	pinctrl-5 = <&quat_tdm_sleep &quat_tdm_dout_sleep>;
+
+};
+
+&soc {
+	adc2_switch_gpio: msm_cdc_pinctrl@62 {
+		compatible = "qcom,msm-cdc-pinctrl";
+		pinctrl-names = "aud_active", "aud_sleep";
+		pinctrl-0 = <&adc2_switch_gpio_active>;
+		pinctrl-1 = <&adc2_switch_gpio_idle>;
+	};
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-camera-sensor-mtp.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-camera-sensor-mtp.dtsi
new file mode 100644
index 000000000000..42addd055d26
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-camera-sensor-mtp.dtsi
@@ -0,0 +1,504 @@
+/*
+ * Copyright (c) 2016-2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+&soc {
+	led_flash_rear: qcom,camera-flash@0 {
+		cell-index = <0>;
+		reg = <0x00 0x00>;
+		compatible = "qcom,camera-flash";
+		flash-source = <&pmi8998_flash0 &pmi8998_flash1>;
+		torch-source = <&pmi8998_torch0 &pmi8998_torch1>;
+		switch-source = <&pmi8998_switch0>;
+		status = "ok";
+	};
+
+	led_flash_front: qcom,camera-flash@1 {
+		cell-index = <1>;
+		reg = <0x01 0x00>;
+		compatible = "qcom,camera-flash";
+		flash-source = <&pmi8998_flash2>;
+		torch-source = <&pmi8998_torch2>;
+		switch-source = <&pmi8998_switch1>;
+		status = "ok";
+	};
+
+	actuator_rear_regulator: gpio-regulator@0 {
+		compatible = "regulator-fixed";
+		reg = <0x00 0x00>;
+		regulator-name = "actuator_rear_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 26 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+
+	actuator_rear_aux_regulator: gpio-regulator@1 {
+		compatible = "regulator-fixed";
+		reg = <0x01 0x00>;
+		regulator-name = "actuator_rear_aux_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 21 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+
+	camera_vdig_ldo: gpio-regulator@2 {
+		compatible = "regulator-fixed";
+		reg = <0x02 0x00>;
+		regulator-name = "camera_vdig_ldo";
+		regulator-min-microvolt = <1350000>;
+		regulator-max-microvolt = <1350000>;
+		regulator-enable-ramp-delay = <135>;
+		enable-active-high;
+		gpio = <&tlmm 99 0>;
+	};
+
+	camera_ir_ldo: gpio-regulator@3 {
+		compatible = "regulator-fixed";
+		reg = <0x03 0x00>;
+		regulator-name = "camera_ir_ldo";
+		regulator-min-microvolt = <1500000>;
+		regulator-max-microvolt = <1500000>;
+		regulator-enable-ramp-delay = <233>;
+		enable-active-high;
+		gpio = <&tlmm 99 0>;
+		vin-supply = <&pm8998_s4>;
+	};
+
+	camera_ois_regulator: gpio-regulator@4 {
+		compatible = "regulator-fixed";
+		reg = <0x04 0x00>;
+		regulator-name = "camera_ois_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 50 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+};
+
+&cam_cci {
+	actuator_rear: qcom,actuator@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		compatible = "qcom,actuator";
+		cci-master = <0>;
+		cam_vaf-supply = <&actuator_rear_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+	};
+
+	actuator_rear_aux: qcom,actuator@1 {
+		cell-index = <1>;
+		reg = <0x1>;
+		compatible = "qcom,actuator";
+		cci-master = <1>;
+		cam_vaf-supply = <&actuator_rear_aux_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+	};
+
+	ois_rear: qcom,ois@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		compatible = "qcom,ois";
+		cci-master = <0>;
+		cam_vaf-supply = <&camera_ois_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+		status = "ok";
+	};
+
+	eeprom_rear: qcom,eeprom@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		/*eeprom-name = "dipper_imx363_semco";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0xa0>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 0>;
+		rgltr-max-voltage = <0 0>;
+		rgltr-load-current = <0 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear_suspend>;
+		gpios = <&tlmm 13 0>;
+		gpio-req-tbl-num = <0>;
+		gpio-req-tbl-flags = <1>;
+		gpio-req-tbl-label = "CAMIF_MCLK0";
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	eeprom_rear_aux: qcom,eeprom@1 {
+		cell-index = <1>;
+		reg = <0x1>;
+		/*eeprom-name = "dipper_s5k3m3_semco";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0xa0>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 0>;
+		rgltr-max-voltage = <0 0>;
+		rgltr-load-current = <0 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear2_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear2_suspend>;
+		gpios = <&tlmm 13 0>;
+		gpio-req-tbl-num = <0>;
+		gpio-req-tbl-flags = <1>;
+		gpio-req-tbl-label = "CAMIF_MCLK0";
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	eeprom_front: qcom,eeprom@2 {
+		cell-index = <2>;
+		reg = <0x2>;
+		/*eeprom-name = "dipper_s5k2t7_sunny";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0x5a>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1350000 0>;
+		rgltr-max-voltage = <0 3600000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk2_active
+				 &cam_sensor_front_active>;
+		pinctrl-1 = <&cam_sensor_mclk2_suspend
+				 &cam_sensor_front_suspend>;
+		gpios = <&tlmm 15 0>,
+			<&tlmm 104 0>,
+			<&tlmm 29 0>,
+			<&pm8998_gpios 9 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK2",
+					"CAM_RESET2",
+					"CAM_VANA2",
+					"CAM_VDIG2";
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK2_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	eeprom_ir: qcom,eeprom@3 {
+		cell-index = <3>;
+		reg = <0x03>;
+		compatible = "qcom,eeprom";
+		slave-addr = <0xc0>;
+		i2c-freq-mode = <1>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_ir_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1500000 0>;
+		rgltr-max-voltage = <0 3600000 1500000 0>;
+		rgltr-load-current = <0 80000 150000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk1_active
+				 &cam_sensor_ir_active>;
+		pinctrl-1 = <&cam_sensor_mclk1_suspend
+				 &cam_sensor_ir_suspend>;
+		gpios = <&tlmm 14 0>,
+			<&tlmm 25 0>,
+			<&tlmm 91 0>,
+			<&tlmm 7 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK1",
+					"CAM_RESET3",
+					"CAM_VANA3",
+					"CAM_VDIG3";
+		sensor-mode = <0>;
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@0 {
+		cell-index = <0>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x0>;
+		csiphy-sd-index = <0>;
+		sensor-position-roll = <90>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <180>;
+		led-flash-src = <&led_flash_rear>;
+		actuator-src = <&actuator_rear>;
+		eeprom-src = <&eeprom_rear>;
+		ois-src = <&ois_rear>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pm8998_l22>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 2864000 1350000 0>;
+		rgltr-max-voltage = <0 2864000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear_suspend>;
+		gpios = <&tlmm 13 0>,
+			<&tlmm 80 0>,
+			<&tlmm 102 0>,
+			<&pm8998_gpios 11 0>,
+			<&tlmm 40 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-custom1 = <4>;
+		gpio-req-tbl-num = <0 1 2 3 4>;
+		gpio-req-tbl-flags = <1 0 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK0",
+					"CAM_RESET0",
+					"CAM_VANA0",
+					"CAM_VDIG0",
+					"CAM_CUSTOM0";
+		sensor-mode = <0>;
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@1 {
+		cell-index = <1>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x1>;
+		csiphy-sd-index = <1>;
+		sensor-position-roll = <90>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <180>;
+		actuator-src = <&actuator_rear_aux>;
+		eeprom-src = <&eeprom_rear_aux>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vdig", "cam_vio", "cam_vana",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <1350000 0 3312000 0>;
+		rgltr-max-voltage = <1350000 0 3600000 0>;
+		rgltr-load-current = <135000 0 80000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk3_active
+				&cam_sensor_rear2_active>;
+		pinctrl-1 = <&cam_sensor_mclk3_suspend
+				&cam_sensor_rear2_suspend>;
+		gpios = <&tlmm 16 0>,
+			<&tlmm 28 0>,
+			<&tlmm 79 0>,
+			<&tlmm 92 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK3",
+					"CAM_RESET1",
+					"CAM_VANA1",
+					"CAM_VDIG1";
+		sensor-mode = <0>;
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK3_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@2 {
+		cell-index = <2>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x02>;
+		csiphy-sd-index = <2>;
+		sensor-position-roll = <270>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <0>;
+		eeprom-src = <&eeprom_front>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1350000 0>;
+		rgltr-max-voltage = <0 3600000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk2_active
+				 &cam_sensor_front_active>;
+		pinctrl-1 = <&cam_sensor_mclk2_suspend
+				 &cam_sensor_front_suspend>;
+		gpios = <&tlmm 15 0>,
+			<&tlmm 104 0>,
+			<&tlmm 29 0>,
+			<&pm8998_gpios 9 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK2",
+					"CAM_RESET2",
+					"CAM_VANA2",
+					"CAM_VDIG2";
+		sensor-mode = <0>;
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK2_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@3 {
+		cell-index = <3>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x03>;
+		csiphy-sd-index = <3>;
+		sensor-position-roll = <270>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <0>;
+		eeprom-src = <&eeprom_ir>;
+		cam_vio-supply = <&pm8998_lvs1>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_ir_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1500000 0>;
+		rgltr-max-voltage = <0 3600000 1500000 0>;
+		rgltr-load-current = <0 80000 150000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk1_active
+				 &cam_sensor_ir_active>;
+		pinctrl-1 = <&cam_sensor_mclk1_suspend
+				 &cam_sensor_ir_suspend>;
+		gpios = <&tlmm 14 0>,
+			<&tlmm 25 0>,
+			<&tlmm 91 0>,
+			<&tlmm 7 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK1",
+					"CAM_RESET3",
+					"CAM_VANA3",
+					"CAM_VDIG3";
+		sensor-mode = <0>;
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp-v2.1.dts b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp-v2.1.dts
new file mode 100644
index 000000000000..8a106cac6f4c
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp-v2.1.dts
@@ -0,0 +1,26 @@
+/* Copyright (c) 2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+/dts-v1/;
+
+#include "../../sdm845-v2.1.dtsi"
+#include "../../sdm845-sde-display.dtsi"
+#include "dipper-audio-overlay.dtsi"
+#include "dipper-p0-pinctrl.dtsi"
+#include "dipper-p0.dtsi"
+
+/ {
+	model = "Xiaomi Technologies, Inc. Dipper new MP v2.1";
+	compatible = "qcom,sdm845-mtp", "qcom,sdm845", "qcom,mtp";
+	qcom,board-id = <55 0>;
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp.dtsi
new file mode 100644
index 000000000000..ff2016edc5a1
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-mp.dtsi
@@ -0,0 +1,22 @@
+
+/* Copyright (c) 2016-2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+#include "dipper-p0.dtsi"
+
+&pmi8998_pdphy {
+	/*mi,limit_pd_vbus 1:enable 0:disable*/
+	mi,limit_pd_vbus = <1>;
+	mi,pd_vbus_max_limit = <9000000>;
+
+};
+
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-camera-sensor-mtp.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-camera-sensor-mtp.dtsi
new file mode 100644
index 000000000000..7f273f3a7ed5
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-camera-sensor-mtp.dtsi
@@ -0,0 +1,535 @@
+/*
+ * Copyright (c) 2016-2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+&soc {
+	led_flash_rear: qcom,camera-flash@0 {
+		cell-index = <0>;
+		reg = <0x00 0x00>;
+		compatible = "qcom,camera-flash";
+		flash-source = <&pmi8998_flash0 &pmi8998_flash1>;
+		torch-source = <&pmi8998_torch0 &pmi8998_torch1>;
+		switch-source = <&pmi8998_switch0>;
+		status = "ok";
+	};
+
+	led_flash_rear_aux: qcom,camera-flash@1 {
+		cell-index = <1>;
+		reg = <0x01 0x00>;
+		compatible = "qcom,camera-flash";
+		flash-source = <&pmi8998_flash0 &pmi8998_flash1>;
+		torch-source = <&pmi8998_torch0 &pmi8998_torch1>;
+		switch-source = <&pmi8998_switch0>;
+		status = "ok";
+	};
+
+	actuator_rear_regulator: gpio-regulator@0 {
+		compatible = "regulator-fixed";
+		reg = <0x00 0x00>;
+		regulator-name = "actuator_rear_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 26 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+
+	actuator_rear_aux_regulator: gpio-regulator@1 {
+		compatible = "regulator-fixed";
+		reg = <0x01 0x00>;
+		regulator-name = "actuator_rear_aux_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 21 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+
+	camera_vdig_ldo: gpio-regulator@2 {
+		compatible = "regulator-fixed";
+		reg = <0x02 0x00>;
+		regulator-name = "camera_vdig_ldo";
+		regulator-min-microvolt = <1350000>;
+		regulator-max-microvolt = <1350000>;
+		regulator-enable-ramp-delay = <135>;
+		enable-active-high;
+		gpio = <&tlmm 99 0>;
+	};
+
+	camera_ir_ldo: gpio-regulator@3 {
+		compatible = "regulator-fixed";
+		reg = <0x03 0x00>;
+		regulator-name = "camera_ir_ldo";
+		regulator-min-microvolt = <1500000>;
+		regulator-max-microvolt = <1500000>;
+		regulator-enable-ramp-delay = <233>;
+		enable-active-high;
+		gpio = <&tlmm 99 0>;
+		vin-supply = <&pm8998_s4>;
+	};
+
+	camera_ois_regulator: gpio-regulator@4 {
+		compatible = "regulator-fixed";
+		reg = <0x04 0x00>;
+		regulator-name = "camera_ois_regulator";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <100>;
+		enable-active-high;
+		gpio = <&tlmm 50 0>;
+		vin-supply = <&pmi8998_bob>;
+	};
+
+	camera_viodd_ldo: gpio-regulator@5 {
+		compatible = "regulator-fixed";
+		reg = <0x05 0x00>;
+		regulator-name = "camera_viodd_ldo";
+		regulator-min-microvolt = <2800000>;
+		regulator-max-microvolt = <2800000>;
+		regulator-enable-ramp-delay = <135>;
+		enable-active-high;
+		gpio = <&tlmm 75 0>;
+	};
+};
+
+&cam_cci {
+	qcom,cam-res-mgr {
+		compatible = "qcom,cam-res-mgr";
+		status = "ok";
+	};
+
+	actuator_rear: qcom,actuator@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		compatible = "qcom,actuator";
+		cci-master = <0>;
+		cam_vaf-supply = <&actuator_rear_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+	};
+
+	actuator_rear_aux: qcom,actuator@1 {
+		cell-index = <1>;
+		reg = <0x1>;
+		compatible = "qcom,actuator";
+		cci-master = <1>;
+		cam_vaf-supply = <&actuator_rear_aux_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+	};
+
+	ois_rear: qcom,ois@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		compatible = "qcom,ois";
+		cci-master = <0>;
+		cam_vaf-supply = <&camera_ois_regulator>;
+		regulator-names = "cam_vaf";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <2800000>;
+		rgltr-max-voltage = <2800000>;
+		rgltr-load-current = <0>;
+		status = "ok";
+	};
+
+	eeprom_rear: qcom,eeprom@0 {
+		cell-index = <0>;
+		reg = <0x0>;
+		/*eeprom-name = "dipper_imx363_semco";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0xa0>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 0>;
+		rgltr-max-voltage = <0 0>;
+		rgltr-load-current = <0 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear_suspend>;
+
+
+	gpios = <&tlmm 13 0>;
+	gpio-req-tbl-num = <0>;
+	gpio-req-tbl-flags = <1>;
+	gpio-req-tbl-label = "CAMIF_MCLK0";
+	cci-master = <0>;
+	status = "ok";
+	clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+	clock-names = "cam_clk";
+	clock-cntl-level = "turbo";
+	clock-rates = <24000000>;
+};
+
+	eeprom_rear_aux: qcom,eeprom@1 {
+		cell-index = <1>;
+		reg = <0x1>;
+		/*eeprom-name = "dipper_s5k3m3_semco";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0xa0>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 0>;
+		rgltr-max-voltage = <0 0>;
+		rgltr-load-current = <0 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear2_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear2_suspend>;
+		gpios = <&tlmm 13 0>;
+		gpio-req-tbl-num = <0>;
+		gpio-req-tbl-flags = <1>;
+		gpio-req-tbl-label = "CAMIF_MCLK0";
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+
+	eeprom_front: qcom,eeprom@2 {
+		cell-index = <2>;
+		reg = <0x2>;
+		/*eeprom-name = "dipper_s5k2t7_sunny";*/
+		compatible = "qcom,eeprom";
+		slave-addr = <0x5a>;
+		i2c-freq-mode = <1>;
+		num-blocks = <1>;
+		page0 = <0 0 0 0 0 0>;
+		poll0 = <0 0 0 0 0 0>;
+		mem0 = <8192 0x00 2 0 1 0>;
+		qcom,cam-power-seq-type = "cam_vio";
+		qcom,cam-power-seq-cfg-val = <1>;
+		qcom,cam-power-seq-delay = <1>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1350000 0>;
+		rgltr-max-voltage = <0 3600000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk2_active
+				 &cam_sensor_front_active>;
+		pinctrl-1 = <&cam_sensor_mclk2_suspend
+				 &cam_sensor_front_suspend>;
+		gpios = <&tlmm 15 0>,
+			<&tlmm 104 0>,
+			<&tlmm 80 0>,//<&tlmm 29 0>,
+			<&pm8998_gpios 9 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK2",
+					"CAM_RESET2",
+					"CAM_VANA2",
+					"CAM_VDIG2";
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK2_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	eeprom_ir: qcom,eeprom@3 {
+		cell-index = <3>;
+		reg = <0x03>;
+		compatible = "qcom,eeprom";
+		slave-addr = <0xc0>;
+		i2c-freq-mode = <1>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_ir_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1500000 0>;
+		rgltr-max-voltage = <0 3600000 1500000 0>;
+		rgltr-load-current = <0 80000 150000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk1_active
+				 &cam_sensor_ir_active>;
+		pinctrl-1 = <&cam_sensor_mclk1_suspend
+				 &cam_sensor_ir_suspend>;
+		gpios = <&tlmm 14 0>,
+			<&tlmm 25 0>,
+			<&tlmm 44 0>, //<&tlmm 91 0>,
+			<&tlmm 22 0>; //<&tlmm 7 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK1",
+					"CAM_RESET3",
+					"CAM_VANA3",
+					"CAM_VDIG3";
+		sensor-mode = <0>;
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@0 {
+		cell-index = <0>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x0>;
+		csiphy-sd-index = <0>;
+		sensor-position-roll = <90>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <180>;
+		led-flash-src = <&led_flash_rear>;
+		actuator-src = <&actuator_rear>;
+		eeprom-src = <&eeprom_rear>;
+		ois-src = <&ois_rear>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pm8998_l22>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 2864000 1350000 0>;
+		rgltr-max-voltage = <0 2864000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk0_active
+				&cam_sensor_rear_active>;
+		pinctrl-1 = <&cam_sensor_mclk0_suspend
+				&cam_sensor_rear_suspend>;
+		gpios = <&tlmm 13 0>,
+			<&tlmm 119 0>,//<&tlmm 80 0>,  //rst
+			<&tlmm 12 0>,//<&tlmm 102 0>,  //avdd 1.8
+			<&pm8998_gpios 11 0>, //dvdd
+			<&tlmm 40 0>;  //avdd 2.8
+
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-custom1 = <4>;
+
+
+		gpio-req-tbl-num = <0 1 2 3 4>;
+		gpio-req-tbl-flags = <1 0 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK0",
+					"CAM_RESET0",
+					"CAM_VANA0",
+					"CAM_VDIG0",
+					"CAM_CUSTOM0";
+
+
+		sensor-mode = <0>;
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK0_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@1 {
+		cell-index = <1>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x1>;
+		csiphy-sd-index = <1>;
+		sensor-position-roll = <90>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <180>;
+		led-flash-src = <&led_flash_rear_aux>;
+		actuator-src = <&actuator_rear_aux>;
+		eeprom-src = <&eeprom_rear_aux>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vdig", "cam_vio", "cam_vana",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <1350000 0 3312000 0>;
+		rgltr-max-voltage = <1350000 0 3600000 0>;
+		rgltr-load-current = <135000 0 80000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk3_active
+				&cam_sensor_rear2_active>;
+		pinctrl-1 = <&cam_sensor_mclk3_suspend
+				&cam_sensor_rear2_suspend>;
+		gpios = <&tlmm 16 0>,
+			<&tlmm 43 0>,//<&tlmm 28 0>,
+			<&tlmm 121 0>,//<&tlmm 79 0>,
+			<&tlmm 39 0>,//<&tlmm 92 0>;
+			<&tlmm 36 0>;//mipi_sel
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-vio = <4>;
+
+		gpio-req-tbl-num = <0 1 2 3 4>;
+		gpio-req-tbl-flags = <1 0 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK3",
+					"CAM_RESET1",
+					"CAM_VANA1",
+					"CAM_VDIG1",
+					"CAM_VIO1";
+
+		sensor-mode = <0>;
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK3_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@2 {
+		cell-index = <2>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x02>;
+		csiphy-sd-index = <2>;
+		sensor-position-roll = <270>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <0>;
+		eeprom-src = <&eeprom_front>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_vdig_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1350000 0>;
+		rgltr-max-voltage = <0 3600000 1350000 0>;
+		rgltr-load-current = <0 80000 135000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk2_active
+				 &cam_sensor_front_active>;
+		pinctrl-1 = <&cam_sensor_mclk2_suspend
+				 &cam_sensor_front_suspend>;
+		gpios = <&tlmm 15 0>,
+			<&tlmm 104 0>,
+			<&tlmm 80 0>,//<&tlmm 29 0>,
+			<&pm8998_gpios 9 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK2",
+					"CAM_RESET2",
+					"CAM_VANA2",
+					"CAM_VDIG2";
+		sensor-mode = <0>;
+		//cci-master = <1>;
+		cci-master = <0>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK2_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+
+	qcom,cam-sensor@3 {
+		cell-index = <3>;
+		compatible = "qcom,cam-sensor";
+		reg = <0x03>;
+		csiphy-sd-index = <1>;
+		sensor-position-roll = <270>;
+		sensor-position-pitch = <0>;
+		sensor-position-yaw = <0>;
+		eeprom-src = <&eeprom_ir>;
+		cam_vio-supply = <&camera_viodd_ldo>;
+		cam_vana-supply = <&pmi8998_bob>;
+		cam_vdig-supply = <&camera_ir_ldo>;
+		cam_clk-supply = <&titan_top_gdsc>;
+		regulator-names = "cam_vio", "cam_vana", "cam_vdig",
+			"cam_clk";
+		rgltr-cntrl-support;
+		rgltr-min-voltage = <0 3312000 1500000 0>;
+		rgltr-max-voltage = <0 3600000 1500000 0>;
+		rgltr-load-current = <0 80000 150000 0>;
+		gpio-no-mux = <0>;
+		pinctrl-names = "cam_default", "cam_suspend";
+		pinctrl-0 = <&cam_sensor_mclk1_active
+				 &cam_sensor_ir_active>;
+		pinctrl-1 = <&cam_sensor_mclk1_suspend
+				 &cam_sensor_ir_suspend>;
+		gpios = <&tlmm 14 0>,
+			<&tlmm 25 0>,
+			<&tlmm 44 0>, //<&tlmm 91 0>,
+			<&tlmm 22 0>; //<&tlmm 7 0>;
+		gpio-reset = <1>;
+		gpio-vana = <2>;
+		gpio-vdig = <3>;
+		gpio-req-tbl-num = <0 1 2 3>;
+		gpio-req-tbl-flags = <1 0 0 0>;
+		gpio-req-tbl-label = "CAMIF_MCLK1",
+					"CAM_RESET3",
+					"CAM_VANA3",
+					"CAM_VDIG3";
+		sensor-mode = <0>;
+		cci-master = <1>;
+		status = "ok";
+		clocks = <&clock_camcc CAM_CC_MCLK1_CLK>;
+		clock-names = "cam_clk";
+		clock-cntl-level = "turbo";
+		clock-rates = <24000000>;
+	};
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-pinctrl.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-pinctrl.dtsi
new file mode 100644
index 000000000000..66573e95db5e
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0-pinctrl.dtsi
@@ -0,0 +1,730 @@
+
+/* Copyright (c) 2016-2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+&tlmm {
+	ts_mux {
+		ts_active: ts_active {
+			mux {
+				pins = "gpio31", "gpio32";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio31", "gpio32";
+				drive-strength = <16>;
+				bias-pull-up;
+			};
+		};
+
+		ts_reset_suspend: ts_reset_suspend {
+			mux {
+				pins = "gpio32";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio32";
+				drive-strength = <2>;
+				bias-disable;
+			};
+		};
+
+		ts_int_suspend: ts_int_suspend {
+			mux {
+				pins = "gpio31";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio31";
+				drive-strength = <2>;
+				bias-disable;
+			};
+		};
+	};
+
+	lm3644 {
+		lm3644_led_active: lm3644_led_active {
+			mux {
+				pins = "gpio93", "gpio96", "gpio135";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio93", "gpio96", "gpio135";
+				drive-strength = <8>;
+				bias-disable;
+			};
+		};
+
+		lm3644_led_suspend: lm3644_led_suspend {
+			mux {
+				pins = "gpio93", "gpio96", "gpio135";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio93", "gpio96", "gpio135";
+				drive-strength = <2>;
+				bias-disable;
+			};
+		};
+	};
+
+	cam_sensor_ir_active: cam_sensor_ir_active {
+		/* RESET  AVDD_LDO*/
+		mux {
+			pins = "gpio25", "gpio91";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio25", "gpio91";
+			bias-disable; /* No PULL */
+			drive-strength = <2>; /* 2 MA */
+		};
+	};
+
+	cam_sensor_ir_suspend: cam_sensor_ir_suspend {
+		/* RESET */
+		mux {
+			pins = "gpio25", "gpio91";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio25", "gpio91";
+			bias-pull-down; /* PULL DOWN */
+			drive-strength = <2>; /* 2 MA */
+			output-low;
+		};
+	};
+
+	cam_sensor_iris_active: cam_sensor_iris_active {
+		/* RESET  AVDD_LDO*/
+		mux {
+			pins = "gpio9", "gpio8";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio9", "gpio8";
+			bias-disable; /* No PULL */
+			drive-strength = <2>; /* 2 MA */
+		};
+	};
+
+	cam_sensor_iris_suspend: cam_sensor_iris_suspend {
+		/* RESET */
+		mux {
+			pins = "gpio9";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio9";
+			bias-disable; /* No PULL */
+			drive-strength = <2>; /* 2 MA */
+			output-low;
+		};
+	};
+
+	cam_sensor_mclk3_active: cam_sensor_mclk3_active {
+		/* MCLK3 */
+		mux {
+			/* CLK, DATA */
+			pins = "gpio16";
+			function = "cam_mclk";
+		};
+
+		config {
+			pins = "gpio16";
+			bias-disable; /* No PULL */
+			drive-strength = <4>; /* 2 MA */
+		};
+	};
+
+	cam_sensor_mclk3_suspend: cam_sensor_mclk3_suspend {
+		/* MCLK3 */
+		mux {
+			/* CLK, DATA */
+			pins = "gpio16";
+			function = "cam_mclk";
+		};
+
+		config {
+			pins = "gpio16";
+			bias-pull-down; /* PULL DOWN */
+			drive-strength = <4>; /* 2 MA */
+			output-low;
+		};
+	};
+
+	fp_mux {
+		fp_active: fp_active {
+			mux {
+				pins = "gpio79";
+				function = "gpio";
+			};
+			config {
+				pins = "gpio79";
+				drive-strength = <8>;
+				bias-disable;
+			};
+		};
+
+		fp_suspend: fp_suspend {
+			mux {
+				pins = "gpio79";
+				function = "gpio";
+			};
+			config {
+				pins = "gpio79";
+				drive-strength = <2>;
+				bias-disable;
+			};
+		};
+	};
+	/* GPIO_37 : FP_RESET_N */
+	msm_gpio_37: msm_gpio_37 {
+		mux {
+			 pins = "gpio37";
+			 function = "gpio";
+		};
+
+		config {
+			pins = "gpio37";
+			drive-strength = <2>;
+			bias-disable;
+			output-low;
+		};
+	};
+
+	/* GPIO_37 : FP_RESET_N, state device active*/
+	msm_gpio_37_output_high: msm_gpio_37_output_high {
+		mux {
+			pins = "gpio37";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio37";
+			drive-strength = <2>;
+			bias-disable;
+			output-high;
+		};
+	};
+
+	/* GPIO_79 : FP_INT_N */
+	msm_gpio_79: msm_gpio_79 {
+		mux {
+			pins = "gpio79";
+			function = "gpio";
+		};
+
+		config {
+			pins = "gpio79";
+			drive-strength = <2>;
+			bias-pull-down;
+		};
+	};
+
+	spk_id_no_pull: spk_id_no_pull {
+		mux {
+			pins = "gpio27";
+			function = "gpio";
+		};
+		config {
+			pins = "gpio27";
+			drive-strength = <8>;
+			bias-disable;
+			input-enable;
+		};
+	};
+	spk_id_pull_up: spk_id_pull_up {
+		mux {
+			pins = "gpio27";
+			function = "gpio";
+		};
+		config {
+			pins = "gpio27";
+			drive-strength = <8>;
+			bias-pull-up;
+			input-enable;
+		};
+	};
+	spk_id_pull_down: spk_id_pull_down {
+		mux {
+			pins = "gpio27";
+			function = "gpio";
+		};
+		config {
+			pins = "gpio27";
+			drive-strength = <8>;
+			bias-pull-down;
+			input-enable;
+		};
+	};
+	adc2_switch_gpio_ctrl {
+		adc2_switch_gpio_idle: adc2_switch_idle {
+			mux {
+				pins = "gpio62";
+				function = "gpio";
+			};
+			config {
+				pins = "gpio62";
+				drive-strength = <2>;
+				bias-pull-down;
+				output-low;
+			};
+		};
+
+		adc2_switch_gpio_active: adc2_switch_active {
+			mux {
+				pins = "gpio62";
+				function = "gpio";
+			};
+			config {
+				pins = "gpio62";
+				drive-strength = <2>;
+				bias-disable;
+				output-high;
+			};
+		};
+	};
+
+	atest_usb13_active: atest_usb13_active {
+		mux {
+			pins = "gpio8";
+			function = "gpio";
+		};
+		config {
+			pins = "gpio8";
+			drive-strength = <12>;
+			output-high;
+			bias-pull-up;
+		};
+	};
+
+	atest_usb13_suspend: atest_usb13_suspend {
+		mux {
+			pins = "gpio8";
+			function = "gpio";
+		};
+		config {
+			pins = "gpio8";
+			drive-strength = <2>;
+			output-low;
+			bias-pull-down;
+		};
+	};
+};
+
+&nfc_enable_active {
+	/* active state */
+	mux {
+		/* 128: NFC ENABLE 116:ESE Enable */
+		pins = "gpio128", "gpio88", "gpio116";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio128", "gpio88", "gpio116";
+		drive-strength = <2>; /* 2 MA */
+		bias-pull-up;
+	};
+};
+
+&nfc_enable_suspend {
+	/* sleep state */
+	mux {
+		/* 128: NFC ENABLE 116:ESE Enable */
+		pins = "gpio128", "gpio88", "gpio116";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio128", "gpio88", "gpio116";
+		drive-strength = <2>; /* 2 MA */
+		bias-disable;
+	};
+};
+
+&cam_sensor_mclk0_active {
+	/* MCLK0 */
+	mux {
+		pins = "gpio13";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio13";
+		bias-disable; /* No PULL */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk0_suspend {
+	/* MCLK0 */
+	mux {
+		pins = "gpio13";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio13";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk1_active {
+	/* MCLK1 */
+	mux {
+		pins = "gpio14";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio14";
+				bias-disable; /* No PULL */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk1_suspend {
+	/* MCLK1 */
+	mux {
+		pins = "gpio14";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio14";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <4>; /* 2 MA */
+		output-low;
+	};
+};
+
+&cam_sensor_mclk2_active {
+	/* MCLK1 */
+	mux {
+	/* CLK, DATA */
+		pins = "gpio15";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio15";
+		bias-disable; /* No PULL */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk2_suspend {
+	/* MCLK1 */
+	mux {
+		/* CLK, DATA */
+		pins = "gpio15";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio15";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk3_active {
+	/* MCLK3 */
+	mux {
+		pins = "gpio16";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio16";
+		bias-disable; /* No PULL */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_mclk3_suspend {
+	/* MCLK3 */
+	mux {
+		pins = "gpio16";
+		function = "cam_mclk";
+	};
+
+	config {
+		pins = "gpio16";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <4>; /* 2 MA */
+	};
+};
+
+&cam_sensor_rear_active {
+	/* RESET, AVDD LDO */
+	mux {
+		pins = "gpio119","gpio40","gpio12","gpio11";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio119","gpio40","gpio12","gpio11";
+				bias-disable; /* No PULL */
+		drive-strength = <2>; /* 2 MA */
+	};
+};
+
+&cam_sensor_rear_suspend {
+	/* RESET, AVDD LDO */
+	mux {
+		pins = "gpio119","gpio40","gpio12","gpio11";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio119","gpio40","gpio12","gpio11";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <2>; /* 2 MA */
+		output-low;
+	};
+};
+
+&cam_sensor_rear2_active {
+	/* RESET, STANDBY */
+	mux {
+		pins = "gpio43","gpio121","gpio39","gpio36";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio43","gpio121","gpio39","gpio36";
+		bias-disable; /* No PULL */
+		drive-strength = <2>; /* 2 MA */
+	};
+};
+
+&cam_sensor_rear2_suspend {
+	/* RESET, STANDBY */
+	mux {
+		pins = "gpio43","gpio121","gpio39","gpio36";
+		function = "gpio";
+	};
+	config {
+		pins = "gpio43","gpio121","gpio39","gpio36";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <2>; /* 2 MA */
+		output-low;
+	};
+};
+
+&cam_sensor_front_active {
+	/* RESET  AVDD_LDO*/
+	mux {
+		pins = "gpio104", "gpio80", "gpio9";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio104", "gpio80", "gpio9";
+		bias-disable; /* No PULL */
+		drive-strength = <2>; /* 2 MA */
+	};
+};
+
+&cam_sensor_front_suspend {
+	/* RESET */
+	mux {
+		pins = "gpio104", "gpio80", "gpio9";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio104", "gpio80", "gpio9";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <2>; /* 2 MA */
+	};
+};
+
+&cam_sensor_ir_active {
+	/* RESET  AVDD_LDO*/
+	mux {
+		pins = "gpio25", "gpio44", "gpio22";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio25", "gpio44", "gpio22";
+		bias-disable; /* No PULL */
+		drive-strength = <2>; /* 2 MA */
+	};
+};
+
+&cam_sensor_ir_suspend {
+	/* RESET */
+	mux {
+		pins = "gpio25", "gpio44", "gpio22";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio25", "gpio44", "gpio22";
+		bias-pull-down; /* PULL DOWN */
+		drive-strength = <2>; /* 2 MA */
+		output-low;
+	};
+};
+
+
+&qupv3_se4_spi_sleep {
+	mux {
+		pins = "gpio89", "gpio90", "gpio91",
+			"gpio92";
+		function = "gpio";
+	};
+
+	config {
+		pins = "gpio89", "gpio90", "gpio91",
+			"gpio92";
+		drive-strength = <6>;
+		bias-disable;
+		output-high;
+	};
+};
+
+
+&pm8998_gpios {
+	gps_clk {
+		gps_clk_default: gps_clk_default {
+			pins = "gpio16";
+			function = "func1";
+			bias-disable;
+			output-low;
+			input-disable;
+			power-source = <0>;
+		};
+
+	};
+	gps_power {
+		gps_power_default:gps_power_default {
+			pins = "gpio19"; /* GPIO 19 */
+			function = "normal"; /* normal output */
+			power-source = <1>; /* VIN0 */
+			output-high; /* digital output, no invert */
+			input-disable; /* prevent GPIO from being set to DIO */
+		};
+	};
+};
+
+&tlmm {
+	gps {
+		gps_int_active: gps_int_active {
+		/* active state */
+			mux {
+				/* GPIO 129 gps Read Interrupt */
+				pins = "gpio129";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio129";
+				drive-strength = <2>; /* 2 MA */
+				input-enable;
+			};
+		};
+
+		gps_int_suspend: gps_int_suspend {
+		/* sleep state */
+			mux {
+				/* GPIO 129 gps Read Interrupt */
+				pins = "gpio129";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio129";
+				drive-strength = <2>; /* 2 MA */
+				input-enable;
+			};
+		};
+		gps_resp_active: gps_resp_active {
+			/* active state */
+			mux {
+				/* 132: gps mcu rdy */
+				pins = "gpio132";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio132";
+				drive-strength = <2>; /* 2 MA */
+				input-enable;
+				bias-disable;
+				};
+		};
+
+		gps_resp_suspend: gps_resp_suspend {
+			/* sleep state */
+			mux {
+				/* GPIO 132 gps mcu ready */
+				pins = "gpio132";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio132";
+				drive-strength = <2>; /* 2 MA */
+				input-enable;
+				bias-disable;
+			};
+		};
+		gps_enable_active: gps_enable_active {
+			/* active state */
+			mux {
+				/* 133:gps nstandby 143:gps mcu req*/
+				pins = "gpio133", "gpio143";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio133", "gpio143";
+				drive-strength = <2>; /* 2 MA */
+				output-low;
+				};
+		};
+
+		gps_enable_suspend: gps_enable_suspend {
+			/* sleep state */
+			mux {
+				/* 133:gps nstandby 143:gps mcu req */
+				pins = "gpio133", "gpio143";
+				function = "gpio";
+			};
+
+			config {
+				pins = "gpio133", "gpio143";
+				drive-strength = <2>; /* 2 MA */
+				output-low;
+			};
+		};
+	};
+
+};
+
+
+
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0.dtsi
new file mode 100644
index 000000000000..fe6f299503b5
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dipper-p0.dtsi
@@ -0,0 +1,1057 @@
+
+/* Copyright (c) 2016-2017, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+#include <dt-bindings/gpio/gpio.h>
+#include "../../sdm845-pmic-overlay.dtsi"
+#include "../../sdm845-pinctrl-overlay.dtsi"
+#include "../xiaomi-sde-display.dtsi"
+#include "dipper-p0-camera-sensor-mtp.dtsi"
+
+&qupv3_se10_i2c {
+#include "../../smb1355.dtsi"
+};
+
+&removed_region {
+	reg = <0 0x85fc0000 0 0x4940000>;
+};
+
+&qcom_seecom {
+	reg = <0x86d00000 0x03C00000>;
+};
+
+&reserved_memory {
+		ramdump_fb_mem: ramdump_fb_region@af000000 {
+			compatible = "removed-dma-pool";
+			no-map;
+			reg = <0 0xaf000000 0 0x1000000>;
+		};
+};
+
+&vendor {
+	bluetooth: bt_wcn3990 {
+		compatible = "qca,wcn3990";
+		qca,bt-vdd-io-supply = <&pm8998_s3>;
+		qca,bt-vdd-xtal-supply = <&pm8998_s5>;
+		qca,bt-vdd-core-supply = <&pm8998_l7>;
+		qca,bt-vdd-pa-supply = <&pm8998_l17>;
+		qca,bt-vdd-ldo-supply = <&pm8998_l25>;
+
+		qca,bt-vdd-io-voltage-level = <1352000 1352000>;
+		qca,bt-vdd-xtal-voltage-level = <2040000 2040000>;
+		qca,bt-vdd-core-voltage-level = <1800000 1800000>;
+		qca,bt-vdd-pa-voltage-level = <1304000 1304000>;
+		qca,bt-vdd-ldo-voltage-level = <3312000 3312000>;
+
+		qca,bt-vdd-io-current-level = <1>; /* LPM/PFM */
+		qca,bt-vdd-xtal-current-level = <1>; /* LPM/PFM */
+		qca,bt-vdd-core-current-level = <1>; /* LPM/PFM */
+		qca,bt-vdd-pa-current-level = <1>; /* LPM/PFM */
+		qca,bt-vdd-ldo-current-level = <1>; /* LPM/PFM */
+	};
+};
+
+&soc {
+	gpio_keys {
+		compatible = "gpio-keys";
+		label = "gpio-keys";
+
+		pinctrl-names = "default";
+		pinctrl-0 = <&key_vol_up_default>;
+
+		vol_up {
+			label = "volume_up";
+			gpios = <&pm8998_gpios 6 GPIO_ACTIVE_LOW>;
+			linux,input-type = <1>;
+			linux,code = <115>;
+			gpio-key,wakeup;
+			debounce-interval = <15>;
+			linux,can-disable;
+		};
+		hall_key {
+			label = "hall_key";
+			gpios = <&tlmm 124 GPIO_ACTIVE_LOW>;
+			linux,input-type = <5>;
+			linux,code = <0>;
+			gpio-key,wakeup;
+			debounce-interval = <15>;
+		};
+	};
+	disp_vci_vreg: disp_vci_vreg {
+		compatible = "regulator-fixed";
+		regulator-name = "disp_vci_vreg";
+		start-delay-us = <4000>;
+		enable-active-high;
+		regulator-boot-on;
+		gpio = <&tlmm 35 0>;
+	};
+
+	disp_vddio_vreg: disp_vddio_vreg {
+		compatible = "regulator-fixed";
+		regulator-name = "disp_vddio_vreg";
+		startup-delay-us = <4000>;
+		enable-active-high;
+		regulator-boot-on;
+		gpio = <&tlmm 23 0>;
+	 };
+
+	fp_vdd_vreg: fp_vdd_vreg {
+		compatible = "regulator-fixed";
+		regulator-name = "fp_vdd_vreg";
+		startup-delay-us = <4000>;
+		enable-active-high;
+		gpio = <&tlmm 94 0>;
+		/*regulator-always-on;*/
+	};
+
+
+	fingerprint_fpc {
+		status = "ok";
+		compatible = "fpc,fpc1020";
+		interrupt-parent = <&tlmm>;
+		interrupts = <79 0x0>;
+		fpc,gpio_irq    = <&tlmm 79 0x0>;
+		/* fpc,enable-on-boot; */
+		/* fpc,enable-wakeup;  */
+
+		pinctrl-names = "fpc1020_reset_reset",
+			"fpc1020_reset_active";
+
+		pinctrl-0 = <&msm_gpio_37>;
+		pinctrl-1 = <&msm_gpio_37_output_high>;
+	};
+
+	fingerprint_goodix {
+		compatible = "goodix,fingerprint";
+		gooidx,gpio-reset = <&tlmm 37 0x0>;
+		goodix,gpio-irq = <&tlmm 79 0x0>;
+		fp-gpio-pwr = <&tlmm 94 0>;
+		status = "ok";
+	};
+
+	spk_id_pin: spk-id-pin@27 {
+		compatible = "audio,speaker-id";
+		audio,speaker-id-gpio = <&tlmm 27 0>;
+		pinctrl-names = "pull_down", "pull_up", "no_pull";
+		pinctrl-0 = <&spk_id_pull_down>;
+		pinctrl-1 = <&spk_id_pull_up>;
+		pinctrl-2 = <&spk_id_no_pull>;
+	};
+
+	thermal-message {
+		thermal,batt-array-size = "13";
+		thermal,batt-level-screen-on = "0 2 4 6 8 9 10 11 12 13 14 14 16";
+		thermal,batt-level-screen-off = "0 1 1 1 3 5 6 6 6 7 9 14 16";
+	};
+
+	xiaomi_touch {
+		compatible = "xiaomi-touch";
+		status = "ok";
+		touch,name = "xiaomi-touch";
+	};
+};
+
+&labibb {
+	status = "disabled";
+};
+
+&dsi_ss_notch_fhd_ea8074_cmd {
+	qcom,panel-supply-entries = <&dsi_amoled_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_dcs";
+	qcom,mdss-dsi-bl-min-level = <2>;
+	qcom,mdss-dsi-bl-max-level = <1023>;
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+	qcom,platform-te-gpio = <&tlmm 10 0>;
+	qcom,esd-err-irq-gpio = <&tlmm 52 0x2002>; /* trig-flags: falling-0x0002 rasing-0x0001*/
+	qcom,mdss-dsi-display-timings {
+		timing@0{
+			qcom,mdss-dsi-on-command = [
+				05 01 00 00 0a 00 02 11 00
+				39 00 00 00 00 00 05 2B 00 00 08 c7
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 08 EF F0 31 00 33 31 14 35
+				39 00 00 00 00 00 02 B0 01
+				39 00 00 00 00 00 02 BB 03
+				39 00 00 00 00 00 02 B0 4F
+				39 00 00 00 00 00 02 CB 00
+				39 00 00 00 00 00 02 B0 6B
+				39 00 00 00 00 00 02 CB 00
+				39 00 00 00 00 00 02 F7 03
+				39 00 00 00 00 00 02 B0 05
+				39 00 00 00 00 00 02 B1 10
+				39 00 00 00 00 00 02 B0 02
+				39 00 00 00 00 00 05 D5 02 17 54 14
+				39 01 00 00 00 00 03 F0 A5 A5
+				39 00 00 00 00 00 02 35 00
+				39 00 00 00 00 00 03 51 00 00
+				39 00 00 00 00 00 02 53 20
+				39 01 00 00 6E 00 02 55 00
+				05 01 00 00 00 00 02 29 00];
+		};
+	};
+};
+
+/*
+&dsi_dual_nt35597_video {
+	qcom,panel-supply-entries = <&dsi_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_wled";
+	qcom,mdss-dsi-bl-min-level = <1>;
+	qcom,mdss-dsi-bl-max-level = <4095>;
+	qcom,mdss-dsi-mode-sel-gpio-state = "dual_port";
+	qcom,panel-mode-gpio = <&tlmm 52 0>;
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+};
+
+&dsi_dual_nt35597_cmd {
+	qcom,panel-supply-entries = <&dsi_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_wled";
+	qcom,mdss-dsi-bl-min-level = <1>;
+	qcom,mdss-dsi-bl-max-level = <4095>;
+	qcom,mdss-dsi-mode-sel-gpio-state = "dual_port";
+	qcom,panel-mode-gpio = <&tlmm 52 0>;
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+	qcom,platform-te-gpio = <&tlmm 10 0>;
+};
+
+&dsi_gvo_fhd_rm69299_cmd {
+	qcom,panel-supply-entries = <&dsi_amoled_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_dcs";
+	qcom,mdss-dsi-bl-min-level = <1>;
+	qcom,mdss-dsi-bl-max-level = <1023>;
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+	qcom,platform-te-gpio = <&tlmm 10 0>;
+};
+
+&dsi_tianma_fhd_rm69299_cmd {
+	qcom,panel-supply-entries = <&dsi_amoled_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_dcs";
+	qcom,mdss-dsi-bl-min-level = <1>;
+	qcom,mdss-dsi-bl-max-level = <1023>;
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+	qcom,platform-te-gpio = <&tlmm 10 0>;
+};
+*/
+
+&dsi_sim_vid {
+	qcom,panel-supply-entries = <&dsi_panel_pwr_supply>;
+	qcom,mdss-dsi-bl-pmic-control-type = "bl_ctrl_dcs";
+	qcom,platform-reset-gpio = <&tlmm 6 0>;
+};
+
+&dsi_ss_ea8074_notch_fhd_cmd_display {
+	qcom,dsi-display-active;
+};
+
+&red_led {
+	linux,name = "white";
+	qcom,start-idx = <1>;
+	qcom,idx-len = <8>;
+	qcom,duty-pcts = [00 01 02 03
+			03 02 01 00];
+	qcom,lut-flags = <3>;
+	qcom,pause-lo = <0>;
+	qcom,pause-hi = <0>;
+	qcom,ramp-step-ms = <255>;
+	qcom,use-blink;
+	status = "okay";
+};
+
+&green_led {
+	status = "disabled";
+};
+
+&blue_led {
+	status = "disabled";
+};
+
+&sde_dp {
+	status = "disabled";
+};
+
+&pmi8998_haptics {
+	qcom,vmax-mv = <3100>;
+	qcom,lra-auto-mode;
+	qcom,overdrive;
+	qcom,wave-play-rate-us = <4878>;
+	qcom,wave-shape = "sine";
+	qcom,lra-high-z = "opt1";
+	qcom,lra-auto-res-mode = "qwd";
+	qcom,lra-res-cal-period = <4>;
+	qcom,effect-max = <3>;
+	qcom,effect-arry = [3e 3e be 00 00 00 00 00
+			3e 3e 3e 3e be be a0 00
+			3e 3e 3e 3e 3e be be be];
+	qcom,play-mode = "buffer";
+	status = "okay";
+};
+
+&mdss_mdp {
+	#cooling-cells = <2>;
+	connectors = <&sde_rscc &sde_wb>;
+};
+
+&pm8998_l28{
+	regulator-min-microvolt = <3300000>;
+	regulator-max-microvolt = <3300000>;
+	qcom,init-voltage = <3300000>;
+	regulator-boot-on;
+};
+
+&ufsphy_mem {
+	compatible = "qcom,ufs-phy-qmp-v3";
+
+	vdda-phy-supply = <&pm8998_l1>; /* 0.88v */
+	vdda-pll-supply = <&pm8998_l26>; /* 1.2v */
+	vdda-phy-max-microamp = <62900>;
+	vdda-pll-max-microamp = <18300>;
+
+	status = "ok";
+};
+
+&ufshc_mem {
+	vdd-hba-supply = <&ufs_phy_gdsc>;
+	vdd-hba-fixed-regulator;
+	vcc-supply = <&pm8998_l20>;
+	vcc-voltage-level = <2950000 2960000>;
+	vccq2-supply = <&pm8998_s4>;
+	vcc-max-microamp = <600000>;
+	vccq2-max-microamp = <600000>;
+
+	qcom,vddp-ref-clk-supply = <&pm8998_l2>;
+	qcom,vddp-ref-clk-max-microamp = <100>;
+
+	status = "ok";
+};
+
+&sdhc_2 {
+	vdd-supply = <&pm8998_l21>;
+	qcom,vdd-voltage-level = <2950000 2960000>;
+	qcom,vdd-current-level = <200 800000>;
+
+	vdd-io-supply = <&pm8998_l13>;
+	qcom,vdd-io-voltage-level = <1808000 2960000>;
+	qcom,vdd-io-current-level = <200 22000>;
+
+	pinctrl-names = "active", "sleep", "ds_400KHz",
+			"ds_50MHz", "ds_100MHz", "ds_200MHz";
+	pinctrl-0 = <&sdc2_clk_on  &sdc2_cmd_on &sdc2_data_on &storage_cd>;
+	pinctrl-1 = <&sdc2_clk_off &sdc2_cmd_off &sdc2_data_off &storage_cd>;
+	pinctrl-2 = <&sdc2_clk_ds_400KHz
+			&sdc2_cmd_ds_400KHz &sdc2_data_ds_400KHz>;
+	pinctrl-3 = <&sdc2_clk_ds_50MHz
+			&sdc2_cmd_ds_50MHz &sdc2_data_ds_50MHz>;
+	pinctrl-4 = <&sdc2_clk_ds_100MHz
+			&sdc2_cmd_ds_100MHz &sdc2_data_ds_100MHz>;
+	pinctrl-5 = <&sdc2_clk_ds_200MHz
+			&sdc2_cmd_ds_200MHz &sdc2_data_ds_200MHz>;
+
+	cd-gpios = <&tlmm 126 GPIO_ACTIVE_LOW>;
+
+	status = "ok";
+};
+
+&pmi8998_switch2 {
+	pinctrl-names = "led_enable", "led_disable";
+	pinctrl-0 = <&flash_led3_iris_en>;
+	pinctrl-1 = <&flash_led3_iris_dis>;
+};
+
+&vendor{
+	mtp_batterydata: qcom,battery-data {
+		qcom,batt-id-range-pct = <15>;
+		#include "batterydata-e1-coslight-3400mAh.dtsi"
+		#include "batterydata-e1-atl-3400mAh.dtsi"
+	};
+
+	extcon_usb1: extcon_usb1 {
+		compatible = "linux,extcon-usb-gpio";
+		vbus-gpio = <&pmi8998_gpios 8 GPIO_ACTIVE_HIGH>;
+
+		pinctrl-names = "default";
+		pinctrl-0 = <&usb2_vbus_det_default>;
+	};
+};
+
+&pmi8998_gpios {
+	lm3644_pwm {
+		lm3644_pwm_default: lm3644_pwm_default {
+			    pins = "gpio2";
+			    function = "func1";
+			    bias-disable;
+			    output-low;
+			    input-disable;
+			    drive-push-pull;
+			    qcom,drive-strength = <2>;
+			    power-source = <0>;
+		};
+
+		lm3644_pwm_disabled: lm3644_pwm_disabled {
+			    pins = "gpio2";
+			    function = "normal";
+			    bias-high-impedance;
+		};
+	};
+};
+
+&pmi8998_charger {
+	qcom,usb-icl-ua = <2800000>;
+	qcom,fcc-max-ua = <3300000>;
+	qcom,fcc-low-temp-delta = <2970000>;
+	qcom,fcc-hot-temp-delta = <1650000>;
+	qcom,fcc-cool-temp-delta = <2310000>;
+	qcom,auto-recharge-soc;
+	qcom,sw-jeita-enable;
+	qcom,dynamic-fv-enable;
+	qcom,thermal-mitigation
+				= <1800000 1600000 1400000 1200000 1000000 1000000 1000000>;
+	qcom,thermal-mitigation-dcp
+				= <1800000 1800000 1800000 1800000 1800000 1800000 1800000
+				   1800000 1800000 1800000 1800000 1800000 1600000 1400000
+				   1200000 1000000>;
+	qcom,thermal-mitigation-qc3
+				= <2800000 2725000 2575000 2425000 2275000 2125000 2000000
+				   1800000 1650000 1500000 1360000 1200000 1060000 900000
+				   752500 525000>;
+	qcom,thermal-mitigation-qc2
+				= <1625000 1625000 1625000 1625000 1625000 1525000 1425000
+				   1325000 1225000 1125000 10255000 925000 825000 725000
+				   625000 525000>;
+	qcom,thermal-mitigation-pd-base
+				= <3000000 2800000 2600000 2400000 2200000 2000000 1800000
+				   1600000 1600000 1400000 1200000 1100000 1000000 900000
+				   752500 525000>;
+};
+
+&pmi8998_fg {
+	qcom,fg-force-load-profile;
+	qcom,fg-sys-term-current = <(-300)>;
+	qcom,fg-chg-term-current = <200>;
+	qcom,fg-auto-recharge-soc;
+	qcom,fg-recharge-soc-thr = <99>;
+	qcom,fg-cutoff-voltage = <3400>;
+	qcom,fg-cutoff-current = <200>;
+	qcom,fg-empty-voltage = <3100>;
+	qcom,fg-jeita-hyst-temp = <2>;
+	qcom,fg-jeita-thresholds = <0 15 45 60>;
+	qcom,fg-esr-clamp-mohms = <60>;
+	qcom,fg-batt-temp-delta = <6>;
+	qcom,battery-data = <&mtp_batterydata>;
+	qcom,slope-limit-temp-threshold = <100>;
+	qcom,slope-limit-coeffs = <10 11 12 13>;
+};
+
+&pmi8998_pwm_1 {
+	status = "okay";
+	qcom,period = <25000>;
+
+	qcom,pwm {
+		label = "pwm";
+		qcom,duty = <2500>;
+	};
+};
+
+&smb1355_charger_0 {
+	status = "ok";
+	qcom,enable-ctm;
+};
+
+&smb1355_charger_1 {
+	status = "ok";
+	qcom,enable-ctm;
+};
+
+&qupv3_se9_2uart {
+	status = "ok";
+};
+
+&qupv3_se8_spi {
+	status = "ok";
+};
+
+&qupv3_se3_i2c {
+	status = "ok";
+	nq@28 {
+		compatible = "qcom,nq-nci";
+		reg = <0x28>;
+		qcom,nq-irq = <&tlmm 63 0x00>;
+		qcom,nq-ven = <&tlmm 128 0x00>;
+		qcom,nq-firm = <&tlmm 88 0x00>;
+		qcom,nq-clkreq = <&pm8998_gpios 21 0x00>;
+		qcom,nq-esepwr = <&tlmm 116 0x00>;
+		interrupt-parent = <&tlmm>;
+		qcom,clk-src = "BBCLK3";
+		interrupts = <63 0>;
+		interrupt-names = "nfc_irq";
+		pinctrl-names = "nfc_active", "nfc_suspend";
+		pinctrl-0 = <&nfc_int_active
+					&nfc_enable_active
+					&nfc_clk_default>;
+		pinctrl-1 = <&nfc_int_suspend &nfc_enable_suspend>;
+		clocks = <&clock_rpmh RPMH_LN_BB_CLK3>;
+		clock-names = "ref_clk";
+	};
+};
+
+&qupv3_se5_i2c {
+	status = "ok";
+	tas2557@4c {
+		compatible = "ti,tas2557";
+		reg = <0x4c>;
+		ti,cdc-reset-gpio = <&tlmm 76 0>;
+		ti,irq-gpio = <&tlmm 30 0>;
+		ti,i2s-bits = <16>;   /* support 16, 24, 32 */
+		ti,bypass-tmax = <0>;   /* 0, not bypass; 1, bypass */
+		ti,spk-id-pin = <&spk_id_pin>;
+	};
+
+};
+&qupv3_se10_i2c {
+	status = "ok";
+
+	lm3644@63 {
+		compatible = "leds-lm3644";
+		reg = <0x63>;
+		lm3644,hwen-gpio = <&tlmm 93 0x00>;
+		lm3644,torch-gpio = <&tlmm 96 0x00>;
+		lm3644,tx-gpio = <&tlmm 135 0x00>;
+		pinctrl-names = "lm3644_led_active", "lm3644_led_active_pwm", "lm3644_led_suspend";
+		pinctrl-0 = <&lm3644_led_active &lm3644_pwm_disabled>;
+		pinctrl-1 = <&lm3644_led_active &lm3644_pwm_default>;
+		pinctrl-2 = <&lm3644_led_suspend &lm3644_pwm_disabled>;
+
+		lm3644,use-simulative-pwm;
+		pwms = <&pmi8998_pwm_1 0 0>;
+		lm3644,period-us = <25000>;
+		lm3644,duty-us = <2500>;
+	};
+};
+
+&qupv3_se14_i2c {
+	status = "ok";
+	fts@49 {
+		compatible = "st,fts";
+		reg = <0x49>;
+		interrupt-parent = <&tlmm>;
+		interrupts = <31 0x2008>;
+		pinctrl-names = "pmx_ts_active", "pmx_ts_suspend";
+		pinctrl-0 = <&ts_active>;
+		pinctrl-1 = <&ts_int_suspend &ts_reset_suspend>;
+		vdd-supply = <&disp_vddio_vreg>;
+		avdd-supply = <&pm8998_l28>;
+		fts,pwr-reg-name = "avdd";
+		fts,bus-reg-name = "vdd";
+		fts,irq-gpio = <&tlmm 31 0x2008>;
+		fts,irq-gpio-name = "fts_irq";
+		fts,reset-gpio-enable;
+		fts,reset-gpio = <&tlmm 32 0x00>;
+		fts,reset-gpio-name = "fts_rst";
+		fts,irq-flags = <0x2008>; /* IRQF_ONESHOT | IRQF_TRIGGER_LOW */
+		fts,key-num = <2>;
+		fts,key-codes = <158 139>;
+//		fts,side-volume;
+//		fts,x-base = <1439>;
+//		fts,y-base = <50>;
+//		fts,y-offset = <300>;
+//		fts,y-skip = <240>;
+		fts,config-array-size = <1>;
+		fts,default-fw-name = "st_fts_e1.ftb";
+		fts,touch-up-threshold-min = <20>;
+		fts,touch-up-threshold-max = <50>;
+		fts,touch-up-threshold-def = <20>;
+		fts,touch-tolerance-min = <5>;
+		fts,touch-tolerance-max = <15>;
+		fts,touch-tolerance-def = <5>;
+		fts,edgefilter-leftrigt-def = <30>;
+		fts,edgefilter-topbottom-def = <30>;
+		fts,edgefilter-area-step1 = <100>;
+		fts,edgefilter-area-step2 = <150>;
+		fts,edgefilter-area-step3 = <250>;
+		fts,cfg_0 {
+			fts,tp-vendor = <0x48>;
+			fts,fw-name = "st_fts_e1.ftb";
+			fts,limit-name = "stm_fts_production_limits.csv";
+		};
+	};
+	atmel_mxt_ts_640u@4a {
+		compatible = "atmel,mxt-ts";
+		reg = <0x4a>;
+		interrupt-parent = <&tlmm>;
+		interrupts = <31 0x2008>;
+		vdd-supply = <&pm8998_l28>;
+		vddio-supply = <&disp_vddio_vreg>;
+		/* pins used by touchscreen */
+		pinctrl-names = "pmx_ts_active","pmx_ts_suspend";
+		pinctrl-0 = <&ts_active>;
+		pinctrl-1 = <&ts_int_suspend &ts_reset_suspend>;
+		atmel,reset-gpio = <&tlmm 32 0x00>;
+		atmel,reset-low-prepower;
+		atmel,irq-gpio = <&tlmm 31 0x2008>;
+		atmel,mxt-fw-name = "mXT640U0x1410E8.fw";
+		atmel,config-array-size = <1>;
+		atmel,default-config = <0>;
+		atmel,default-panel-id = <0x51>;
+		atmel,irqflags = <0x2008>;
+		atmel,gpio-mask = <0xC>;
+		atmel,esd-reset;
+		atmel,no-keys;
+		atmel,use-ta-gpio;
+		atmel,raw-min = <3000>;
+		atmel,raw-max = <7500>;
+		atmel,cfg_1 {
+			atmel,family-id = <0xA6>;
+			atmel,variant-id = <0x14>;
+			atmel,version = <0x10>;
+			atmel,build = <0xE8>;
+			atmel,rev-id = <0x12>;
+			atmel,mxt-cfg-name = "mxt_640u_gov_config.fw";
+			atmel,vendor-id = <0x0C>;
+			atmel,panel-id = <0x51>; /* gov id = 0x51 */
+			atmel,key-codes = <158 139 102>;
+			atmel,selfintthr-stylus = <0>;
+			atmel,t71-tchthr-pos = <22>;
+			atmel,self-chgtime-min = <0>;
+			atmel,self-chgtime-max = <0>;
+			atmel,mult-intthr-sensitive = <0x08>;
+			atmel,mult-intthr-not-sensitive = <17>;
+			atmel,atchthr-sensitive = <6>;
+			atmel,mult-tchthr-sensitive = <0x14>;
+			atmel,mult-tchthr-not-sensitive = <0>;
+			atmel,wake-up-self-adcx = <16>;
+			atmel,atchratio = <0>;
+			atmel,xycfg = <0x08>;
+			atmel,xsize = <0x1e>;
+			atmel,xrange-lsb = <0x37>;
+			atmel,xrange-msb = <0x04>;
+			atmel,tchhyst = <0x0a>;
+			atmel,intthrhyst = <0x03>;
+			atmel,xtchthr = <0x23>;
+			atmel,xtchhyst = <0x0f>;
+			atmel,intthrx = <0x08>;
+			atmel,ytchthr = <0x23>;
+			atmel,ytchhyst = <0x0f>;
+			atmel,intthry = <0x08>;
+		};
+	};
+};
+
+&qupv3_se6_4uart {
+	status = "ok";
+};
+
+&usb1 {
+	status = "disabled";
+	extcon = <&extcon_usb1>;
+};
+
+&qusb_phy1 {
+	status = "okay";
+};
+
+&ext_5v_boost {
+	status = "ok";
+};
+
+&usb_qmp_phy {
+	status = "okay";
+};
+
+&wil6210 {
+	status = "ok";
+};
+
+&flash_led {
+	pmi8998_flashlight: qcom,flashlight {
+		label = "flash";
+		qcom,led-name = "flashlight";
+		qcom,max-current = <750>;
+		qcom,default-led-trigger = "flashlight_trigger";
+		qcom,id = <3>;
+		qcom,current-ma = <500>;
+		qcom,duration-ms = <1280>;
+		qcom,ires-ua = <12500>;
+		qcom,hdrm-voltage-mv = <325>;
+		qcom,hdrm-vol-hi-lo-win-mv = <100>;
+	};
+};
+
+&pm8998_l14 {
+	regulator-boot-on;
+};
+
+&qcom_qbt1000 {
+	status = "disabled";
+};
+
+&pm8998_vadc {
+	chan@83 {
+		label = "vph_pwr";
+		reg = <0x83>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <1>;
+		qcom,calibration-type = "absolute";
+		qcom,scale-function = <0>;
+		qcom,hw-settle-time = <0>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@85 {
+		label = "vcoin";
+		reg = <0x85>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <1>;
+		qcom,calibration-type = "absolute";
+		qcom,scale-function = <0>;
+		qcom,hw-settle-time = <0>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@4c {
+		label = "xo_therm";
+		reg = <0x4c>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <4>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@4d {
+		label = "cam_therm0";
+		reg = <0x4d>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@4e {
+		label = "cam_therm1";
+		reg = <0x4e>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@4f {
+		label = "pa_therm0";
+		reg = <0x4f>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@50 {
+		label = "pa_therm1";
+		reg = <0x50>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+
+	chan@51 {
+		label = "quiet_therm";
+		reg = <0x51>;
+		qcom,decimation = <2>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,fast-avg-setup = <0>;
+	};
+};
+
+&pm8998_adc_tm {
+	chan@83 {
+		label = "vph_pwr";
+		reg = <0x83>;
+		qcom,pre-div-channel-scaling = <1>;
+		qcom,calibration-type = "absolute";
+		qcom,scale-function = <0>;
+		qcom,hw-settle-time = <0>;
+		qcom,btm-channel-number = <0x60>;
+	};
+
+	chan@4c {
+		label = "xo_therm";
+		reg = <0x4c>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <4>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x68>;
+		qcom,thermal-node;
+	};
+
+	chan@4d {
+		label = "cam_therm0";
+		reg = <0x4d>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x88>;
+		qcom,thermal-node;
+	};
+
+	chan@4e {
+		label = "cam_therm1";
+		reg = <0x4e>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x70>;
+		qcom,thermal-node;
+	};
+
+	chan@4f {
+		label = "pa_therm0";
+		reg = <0x4f>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x78>;
+		qcom,thermal-node;
+	};
+
+	chan@50 {
+		label = "pa_therm1";
+		reg = <0x50>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x90>;
+		qcom,thermal-node;
+	};
+
+	chan@51 {
+		label = "quiet_therm";
+		reg = <0x51>;
+		qcom,pre-div-channel-scaling = <0>;
+		qcom,calibration-type = "ratiometric";
+		qcom,scale-function = <2>;
+		qcom,hw-settle-time = <2>;
+		qcom,btm-channel-number = <0x80>;
+		qcom,thermal-node;
+	};
+};
+
+&thermal_zones {
+	xo_therm {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x4c>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+				temperature = <65000>;
+				hysteresis = <1000>;
+				type = "passive";
+			};
+		};
+	};
+
+	cam_therm0 {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x4d>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+					temperature = <65000>;
+					hysteresis = <1000>;
+					type = "passive";
+			};
+		};
+	};
+
+	cam_therm1 {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x4e>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+					temperature = <65000>;
+					hysteresis = <1000>;
+					type = "passive";
+			};
+		};
+	};
+
+	pa_therm0 {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x4f>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+					temperature = <65000>;
+					hysteresis = <1000>;
+					type = "passive";
+			};
+		};
+	};
+
+	pa_therm1 {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x50>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+					temperature = <65000>;
+					hysteresis = <1000>;
+					type = "passive";
+			};
+		};
+	};
+
+	quiet_therm {
+		polling-delay-passive = <0>;
+		polling-delay = <0>;
+		thermal-sensors = <&pm8998_adc_tm 0x51>;
+		thermal-governor = "user_space";
+
+		trips {
+			active-config0 {
+				temperature = <65000>;
+				hysteresis = <1000>;
+				type = "passive";
+			};
+		};
+	};
+};
+
+&usb0 {
+	dwc3@a600000 {
+		maximum-speed = "high-speed";
+	};
+};
+
+&usb1 {
+	dwc3@a800000 {
+		maximum-speed = "high-speed";
+	};
+};
+
+&pcie0 {
+	status = "disabled";
+};
+
+&pcie1 {
+	status = "disabled";
+};
+
+&qusb_phy0 {
+		qcom,qusb-phy-init-seq =
+			/* <value reg_offset> */
+			   <0x23 0x210 /* PWR_CTRL1 */
+			    0x03 0x04  /* PLL_ANALOG_CONTROLS_TWO */
+			    0x7c 0x18c /* PLL_CLOCK_INVERTERS */
+			    0x80 0x2c  /* PLL_CMODE */
+			    0x0a 0x184 /* PLL_LOCK_DELAY */
+			    0x19 0xb4  /* PLL_DIGITAL_TIMERS_TWO */
+			    0x40 0x194 /* PLL_BIAS_CONTROL_1 */
+			    0x19 0x198 /* PLL_BIAS_CONTROL_2 */
+			    0x21 0x214 /* PWR_CTRL2 */
+			    0x08 0x220 /* IMP_CTRL1 */
+			    0x58 0x224 /* IMP_CTRL2 */
+			    0x07 0x240 /* TUNE1 */
+			    0x29 0x244 /* TUNE2 */
+			    0xca 0x248 /* TUNE3 */
+			    0x04 0x24c /* TUNE4 */
+			    0x03 0x250 /* TUNE5 */
+			    0x00 0x23c /* CHG_CTRL2 */
+			    0x22 0x210>; /* PWR_CTRL1 */
+	pinctrl-names = "atest_usb13_suspend","atest_usb13_active";
+	pinctrl-0 = <&atest_usb13_suspend>;
+	pinctrl-1 = <&atest_usb13_active>;
+	mi,efuse-pll-bias;
+	mi,efuse-pll-bias-seq = <1 0x23>;
+	mi,efuse-pll-bias-host;
+	mi,efuse-pll-bias-seq-host = <1 0x24 2 0x24 3 0x24 4 0x23 5 0x22 6 0x22 7 0x21>;
+};
+
+&pmi8998_pdphy {
+	vbus-supply = <&smb2_vbus>;
+	/*mi,limit_pd_vbus 1:enable 0:disable*/
+	mi,limit_pd_vbus = <1>;
+	mi,pd_vbus_max_limit = <9000000>;
+};
+
+
+
+&soc {
+	disp_vddio_vreg {
+		/delete-property/ gpio;
+		gpio = <&tlmm 23 0>;
+	};
+};
+
+&qupv3_se4_spi {
+	status = "ok";
+	4775_gps@89 {
+			compatible = "ssp,bcm4775";
+			reg = <0>;
+			spi-max-frequency = <12000000>;
+			ssp-host-req = <&tlmm 129 0x00>;
+			ssp-mcu-resp = <&tlmm 132 0x00>;
+			ssp-mcu-req = <&tlmm 143 0x00>;
+			gps,nstandby = <&tlmm 133 0x00>;
+			interrupt-parent = <&tlmm>;
+			interrupts = <129 0>;
+			spi-cpha;
+			spi-cpol;
+			interrupt-names = "gps_irq";
+			gps,power_enable = <&pm8998_gpios 19 GPIO_ACTIVE_HIGH>;
+			pinctrl-names = "gps_active", "gps_suspend";
+			pinctrl-0 = <&gps_int_active
+			&gps_enable_active
+			&gps_clk_default
+			&gps_power_default
+			&gps_resp_active>;
+			pinctrl-1 = <&gps_int_suspend &gps_enable_suspend &gps_resp_suspend>;
+		};
+};
+
+&soc {
+	ssc_sensors: qcom,msm-ssc-sensors {
+		compatible = "qcom,msm-ssc-sensors";
+		status = "ok";
+		qcom,firmware-name = "slpi_dp";
+	};
+};
+
+
+
+
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/dipper/dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi
new file mode 100644
index 000000000000..7881509b6284
--- /dev/null
+++ b/arch/arm64/boot/dts/qcom/xiaomi/dipper/dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi
@@ -0,0 +1,247 @@
+/* Copyright (c) 2015, The Linux Foundation. All rights reserved.
+ * Copyright (C) 2019 XiaoMi, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 and
+ * only version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ */
+
+/*---------------------------------------------------------------------------
+ * This file is autogenerated file using gcdb parser. Please do not edit it.
+ * Update input XML file to add a new entry or update variable in this file
+ * VERSION = "1.0"
+ *---------------------------------------------------------------------------*/
+&soc {
+	dsi_ss_notch_fhd_ea8074_cmd: qcom,mdss_dsi_ss_notch_fhd_ea8074_cmd {
+		qcom,mdss-dsi-panel-name = "ss notch fhd cmd dsi panel";
+		qcom,mdss-dsi-panel-id = <0>;
+		qcom,mdss-dsi-panel-model = "SS NOTCH FHD EA8074 CMD PANEL";
+		qcom,mdss-dsi-panel-sleepwrmod = <0>;
+		qcom,mdss-dsi-panel-type = "dsi_cmd_mode";
+		qcom,mdss-dsi-virtual-channel-id = <0>;
+		qcom,mdss-dsi-stream = <0>;
+		qcom,mdss-dsi-bpp = <24>;
+		qcom,mdss-dsi-underflow-color = <0xff>;
+		qcom,mdss-dsi-border-color = <0>;
+		qcom,mdss-dsi-traffic-mode = "burst_mode";
+		qcom,mdss-dsi-bllp-eof-power-mode;
+		qcom,mdss-dsi-bllp-power-mode;
+		qcom,ulps-enabled;
+		qcom,mdss-dsi-lp11-init;
+		qcom,mdss-dsi-lane-0-state;
+		qcom,mdss-dsi-lane-1-state;
+		qcom,mdss-dsi-lane-2-state;
+		qcom,mdss-dsi-lane-3-state;
+		qcom,mdss-brightness-max-level = <1023>;
+		qcom,mdss-dsi-dma-trigger = "trigger_sw";
+		qcom,mdss-dsi-mdp-trigger = "none";
+		qcom,mdss-dsi-bl-dcs-type-ss;
+		qcom,mdss-dsi-reset-sequence = <1 1>, <0 1>, <1 10>;
+		qcom,mdss-pan-physical-width-dimension = <68>;
+		qcom,mdss-pan-physical-height-dimension = <142>;
+		qcom,mdss-dsi-te-pin-select = <1>;
+		qcom,mdss-dsi-wr-mem-start = <0x2c>;
+		qcom,mdss-dsi-wr-mem-continue = <0x3c>;
+		qcom,mdss-dsi-te-dcs-command = <1>;
+		qcom,mdss-dsi-te-check-enable;
+		qcom,mdss-dsi-te-using-te-pin;
+		qcom,mdss-dsi-tx-eot-append;
+		qcom,mdss-dsi-panel-hdr-enabled;
+		qcom,mdss-dsi-panel-hdr-color-primaries = <14500 15500 32000
+			17000 15500 30000 8000 3000>;
+		qcom,mdss-dsi-panel-peak-brightness = <4300000>;
+		qcom,mdss-dsi-panel-blackness-level = <3230>;
+		qcom,dispparam-enabled;
+		qcom,mdss-panel-on-dimming-delay = <200>;
+		qcom,mdss-dsi-panel-dc-threshold = <320>;
+		qcom,mdss-dsi-display-timings {
+			timing@0{
+				qcom,mdss-dsi-panel-width = <1080>;
+				qcom,mdss-dsi-panel-height = <2248>;
+				qcom,mdss-dsi-h-front-porch = <56>;
+				qcom,mdss-dsi-h-back-porch = <56>;
+				qcom,mdss-dsi-h-pulse-width = <18>;
+				qcom,mdss-dsi-h-sync-skew = <0>;
+				qcom,mdss-dsi-v-back-porch = <24>;
+				qcom,mdss-dsi-v-front-porch = <26>;
+				qcom,mdss-dsi-v-pulse-width = <12>;
+				qcom,mdss-dsi-h-left-border = <0>;
+				qcom,mdss-dsi-h-right-border = <0>;
+				qcom,mdss-dsi-v-top-border = <0>;
+				qcom,mdss-dsi-v-bottom-border = <0>;
+				qcom,mdss-dsi-panel-framerate = <60>;
+				qcom,mdss-dsi-on-command = [
+				05 01 00 00 0a 00 02 11 00
+				39 00 00 00 00 00 05 2B 00 00 08 c7
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 08 EF F0 31 00 33 31 14 35
+				39 00 00 00 00 00 02 B0 01
+				39 00 00 00 00 00 02 BB 03
+				39 00 00 00 00 00 02 B0 4F
+				39 00 00 00 00 00 02 CB 00
+				39 00 00 00 00 00 02 B0 6B
+				39 00 00 00 00 00 02 CB 00
+				39 00 00 00 00 00 02 F7 03
+				39 00 00 00 00 00 02 B0 05
+				39 00 00 00 00 00 02 B1 10
+				39 00 00 00 00 00 02 B0 02
+				39 00 00 00 00 00 05 D5 02 17 54 14
+				39 01 00 00 00 00 03 F0 A5 A5
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 03 Fc 5A 5A
+				39 00 00 00 00 00 03 D2 9F F0
+				39 00 00 00 00 00 02 B0 0E
+				39 00 00 00 00 00 02 d2 70
+				39 00 00 00 00 00 02 b0 04
+				39 00 00 00 00 00 02 d2 20
+				39 00 00 00 00 00 03 F0 A5 A5
+				39 01 00 00 00 00 03 Fc A5 a5
+				39 00 00 00 00 00 02 35 00
+				39 00 00 00 00 00 03 51 00 00
+				39 00 00 00 00 00 02 53 20
+				39 01 00 00 6E 00 02 55 00
+				05 01 00 00 00 00 02 29 00];
+				qcom,mdss-dsi-off-command = [
+						05 01 00 00 11 00 02 28 00
+						39 00 00 00 00 00 03 F0 5A 5A
+						39 00 00 00 00 00 02 B0 49
+						39 00 00 00 00 00 02 CB FF
+						39 00 00 00 00 00 02 B0 4F
+						39 00 00 00 00 00 02 CB C8
+						39 00 00 00 00 00 02 F7 03
+						39 01 00 00 11 00 03 F0 A5 A5
+						05 01 00 00 78 00 02 10 00];
+				qcom,mdss-dsi-on-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-off-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-doze-hbm-command = [
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 02 ef b0
+				39 00 00 00 00 00 02 b0 17
+				39 00 00 00 00 00 04 E3 00 00 00
+				39 01 00 00 01 00 02 53 22
+				39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-doze-lbm-command = [
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 02 ef b0
+				39 00 00 00 00 00 02 b0 17
+				39 00 00 00 00 00 04 E3 00 00 00
+				39 01 00 00 01 00 02 53 23
+				39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-nolp-command = [
+				05 01 00 00 00 00 02 28 00
+				39 00 00 00 00 00 03 F0 5A 5A
+				39 00 00 00 00 00 02 b0 17
+				39 00 00 00 00 00 04 E3 86 80 01
+				39 00 00 00 00 00 02 53 20
+				39 01 00 00 00 00 03 F0 A5 A5
+				05 01 00 00 00 00 02 29 00];
+				qcom,mdss-dsi-doze-hbm-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-doze-lbm-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-nolp-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-acl-off-command = [39 01 00 00 00 00 02 55 00];
+				qcom,mdss-dsi-dispparam-acl-off-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-acl-l1-command = [39 01 00 00 00 00 02 55 01];/* 50% */
+				qcom,mdss-dsi-dispparam-acl-l1-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-acl-l2-command = [39 01 00 00 00 00 02 55 02];/* 40% */
+				qcom,mdss-dsi-dispparam-acl-l2-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-acl-l3-command = [39 01 00 00 00 00 02 55 03];/* 30% */
+				qcom,mdss-dsi-dispparam-acl-l3-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-hbm-off-command = [39 01 00 00 00 00 02 53 28];
+				qcom,mdss-dsi-dispparam-hbm-off-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-hbm-on-command = [39 01 00 00 00 00 02 53 e8];
+				qcom,mdss-dsi-dispparam-hbm-on-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-hbm-fod-off-command = [39 00 00 00 00 00 02 53 20
+									39 00 00 00 00 00 03 F0 5A 5A
+									39 00 00 00 00 00 03 B2 00 40
+									39 00 00 00 00 00 02 B0 04
+									39 00 00 00 00 00 02 B2 80
+									39 00 00 00 00 00 02 F7 03
+									39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-dispparam-hbm-fod-off-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-hbm-fod-on-command = [
+									39 01 00 00 00 00 02 53 20
+									39 00 00 00 00 00 03 F0 5A 5A
+									39 00 00 00 00 00 03 B2 00 10
+									39 00 00 00 00 00 02 B0 04
+									39 00 00 00 00 00 02 B2 00
+									39 00 00 00 00 00 02 F7 03
+									39 00 00 00 00 00 03 F0 A5 A5
+									39 01 00 00 00 00 02 53 e0];
+				qcom,mdss-dsi-dispparam-hbm-fod-on-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-hbm-fod2norm-command = [39 00 00 00 00 00 03 F0 5A 5A
+									39 00 00 00 00 00 03 B2 00 40
+									39 00 00 00 00 00 02 B0 04
+									39 00 00 00 00 00 02 B2 80
+									39 00 00 00 00 00 02 F7 03
+									39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-dispparam-hbm-fod2norm-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-dimmingon-command = [39 01 00 00 01 00 02 53 28];
+				qcom,mdss-dsi-dispparam-dimmingon-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-dimmingoff-command = [39 01 00 00 01 00 02 53 20];
+				qcom,mdss-dsi-dispparam-dimmingoff-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-panel-jitter = <0x1 0x1>;
+				qcom,mdss-dsi-read-panel-id-command = [
+					06 01 00 01 05 00 02 DB 00];
+				qcom,mdss-dsi-read-panel-id-command-state = "dsi_hs_mode";
+				qcom,mdss-dsi-dispparam-flash-test-on-command = [
+					/* AOR 100% Code */
+					39 00 00 00 00 00 03 F0 5A 5A
+					39 00 00 00 00 00 03 51 03 FF
+					39 00 00 00 00 00 02 B0 0B
+					39 00 00 00 00 00 02 B2 82
+					39 00 00 00 00 00 02 B0 16
+					39 00 00 00 00 00 02 B2 D8
+					39 00 00 00 00 00 02 F7 03
+					39 01 00 00 6E 00 03 F0 A5 A5
+					/* Flashing Test Code */
+					39 00 00 00 00 00 03 F0 5A 5A
+					39 00 00 00 00 00 02 B0 32
+					39 00 00 00 00 00 02 CB 01
+					39 00 00 00 00 00 02 B0 40
+					39 00 00 00 00 00 02 CB 3E
+					39 00 00 00 00 00 02 B0 4F
+					39 00 00 00 00 00 02 CB 00
+					39 00 00 00 00 00 02 B0 0B
+					39 00 00 00 00 00 02 CB C0
+					39 00 00 00 00 00 02 F7 03
+					39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-dispparam-flash-test-on-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-dispparam-flash-test-off-command = [
+					/* Normal Condition Code */
+					39 00 00 00 00 00 03 F0 5A 5A
+					39 00 00 00 00 00 02 B0 32
+					39 00 00 00 00 00 02 CB 68
+					39 00 00 00 00 00 02 B0 40
+					39 00 00 00 00 00 02 CB 6E
+					39 00 00 00 00 00 02 B0 4F
+					39 00 00 00 00 00 02 CB 03
+					39 00 00 00 00 00 02 B0 0B
+					39 00 00 00 00 00 02 CB CB
+					39 00 00 00 00 00 02 F7 03
+					39 01 00 00 6E 00 03 F0 A5 A5
+					/* AOR Normal Code */
+					39 00 00 00 00 00 03 F0 5A 5A
+					39 00 00 00 00 00 03 51 03 FF
+					39 00 00 00 00 00 02 B0 0B
+					39 00 00 00 00 00 02 B2 02
+					39 00 00 00 00 00 02 B0 16
+					39 00 00 00 00 00 02 B2 40
+					39 00 00 00 00 00 02 F7 03
+					39 01 00 00 00 00 03 F0 A5 A5];
+				qcom,mdss-dsi-dispparam-flash-test-off-command-state = "dsi_lp_mode";
+				qcom,mdss-dsi-h-sync-pulse = <0>;
+				qcom,mdss-dsi-dispparam-crc-off-command = [
+					39 00 00 00 00 00 03 F0 5A 5A
+					39 00 00 00 00 00 03 E2 00 40
+					39 01 00 00 00 00 03 F0 A5 A5
+					];
+				qcom,mdss-dsi-dispparam-crc-off-command-state = "dsi_lp_mode";
+			};
+		};
+	};
+};
diff --git a/arch/arm64/boot/dts/qcom/xiaomi/xiaomi-sde-display.dtsi b/arch/arm64/boot/dts/qcom/xiaomi/xiaomi-sde-display.dtsi
index 5fb1c32c392d..dc226352b935 100644
--- a/arch/arm64/boot/dts/qcom/xiaomi/xiaomi-sde-display.dtsi
+++ b/arch/arm64/boot/dts/qcom/xiaomi/xiaomi-sde-display.dtsi
@@ -13,8 +13,36 @@
 
 #include "beryllium/dsi-panel-tianma-fhd-nt36672a-video.dtsi"
 #include "beryllium/dsi-panel-ebbg-fhd-ft8719-video.dtsi"
+#include "dipper/dsi-panel-ss-notch-fhd-ea8074-cmd.dtsi"
 
 &soc {
+
+    dsi_amoled_panel_pwr_supply: dsi_amoled_panel_pwr_supply {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		qcom,panel-supply-entry@0 {
+			reg = <0>;
+			qcom,supply-name = "vddio";
+			qcom,supply-min-voltage = <1800000>;
+			qcom,supply-max-voltage = <1800000>;
+			qcom,supply-enable-load = <62000>;
+			qcom,supply-disable-load = <80>;
+			//qcom,supply-post-on-sleep = <20>;
+		};
+
+		qcom,panel-supply-entry@1 {
+			reg = <1>;
+			qcom,supply-name = "vci";
+			qcom,supply-min-voltage = <3000000>;
+			qcom,supply-max-voltage = <3000000>;
+			qcom,supply-enable-load = <62000>;
+			qcom,supply-disable-load = <80>;
+			qcom,supply-post-on-sleep = <10>;
+			qcom,supply-pre-off-sleep = <10>;
+		};
+	};
+
 	dsi_nt36672a_panel_pwr_supply: dsi_nt36672a_panel_pwr_supply {
 		#address-cells = <1>;
 		#size-cells = <0>;
@@ -89,6 +117,19 @@
 	qcom,dsi-default-panel = <&dsi_tianma_fhd_nt36672a_video_display>;
 };
 
+&dsi_ss_notch_fhd_ea8074_cmd {
+	qcom,mdss-dsi-t-clk-post = <0x0e>;
+	qcom,mdss-dsi-t-clk-pre = <0x34>;
+	qcom,mdss-dsi-display-timings {
+		timing@0{
+			qcom,mdss-dsi-panel-phy-timings = [00 22 08 09 25 23 09
+				09 06 03 04 00];
+			qcom,display-topology = <1 0 1>;
+			qcom,default-topology-index = <0>;
+		};
+	};
+};
+
 &dsi_tianma_fhd_nt36672a_video_display {
 	qcom,mdss-dsi-t-clk-post = <0x0E>;
 	qcom,mdss-dsi-t-clk-pre = <0x33>;